/*! Lity - v4.0.0-dev - 2022-02-18
* http://sorgalla.com/lity/
* Copyright (c) 2015-2022 Jan Sorgalla, Anton Andreasson; Licensed MIT */
!function(e,t){"function"==typeof define&&define.amd?define(t):"object"==typeof module&&"object"==typeof module.exports?module.exports=t(e):e.lity=t(e)}("undefined"!=typeof window?window:this,function(e){"use strict";var m=e.document,p=e,b=function(){var n=this;n.promise=new Promise((e,t)=>{n.resolve=e,n.reject=t})},S=m.documentElement,g=[],E="aria-hidden",L="lity-"+E,i='a[href],area[href],input:not([disabled]),select:not([disabled]),textarea:not([disabled]),button:not([disabled]),iframe,object,embed,[contenteditable],[tabindex]:not([tabindex^="-"])',C={esc:!0,handler:null,handlers:{image:o,inline:function(e,t){var n,i,r;try{n=m.querySelector(e)}catch(e){return!1}return!!n&&((i=m.createElement("i")).style.display="none !important",r=n.classList.contains("lity-hide"),t.element().addEventListener("lity:remove",function(){i.insertAdjacentElement("beforebegin",n),null!==i.parentNode&&i.parentNode.removeChild(i),r&&!n.closest(".lity-content")&&n.classList.add("lity-hide")},{once:!0}),n.classList.remove("lity-hide"),n.insertAdjacentElement("afterend",i),n)},iframe:function(e,t){return r(e,t)}},template:'<div class="lity" role="dialog" aria-label="Dialog Window (Press escape to close)" tabindex="-1"><div class="lity-wrap" data-lity-close role="document"><div class="lity-loader" aria-hidden="true">Loading...</div><div class="lity-container"><div class="lity-content"></div><button class="lity-close" type="button" aria-label="Close (Press escape to close)" data-lity-close>&times;</button></div></div></div>'},t=/(^data:image\/)|(\.(png|jpe?g|gif|svg|webp|avif|bmp|ico)(\?\S*)?$)/i;function O(e){var n=new b;return e.length?j(e,function(e,t){"object"==typeof t&&t.addEventListener("transitionend",n.resolve,{once:!0})}):n.resolve(),n.promise}function w(e){e=e||{};for(var t=1;t<arguments.length;t++)if(arguments[t])for(var n in arguments[t])arguments[t].hasOwnProperty(n)&&(e[n]=arguments[t][n]);return e}function j(e,t,n){var i=0;if(n){for(i in e)if(!1===t.apply(e[i],n))break}else for(i in e)if(!1===t.call(e[i],i,e[i]))break;return e}function A(e,t,n){t=new CustomEvent(t,{bubbles:!0,detail:n[0]});e.dispatchEvent(t)}function x(e,t,n){if(1===arguments.length)return w({},e);if("string"==typeof t){if(void 0===n)return void 0===e[t]?null:e[t];e[t]=n}else w(e,t);return this}function l(e){for(var t,n=e.indexOf("?"),i=(-1<n&&(e=e.substr(n+1)),decodeURI(e.split("#")[0]).split("&")),r={},l=0,o=i.length;l<o;l++)i[l]&&(r[(t=i[l].split("="))[0]]=t[1]);return r}function r(e,t,n,i){var r;return t&&t.element().classList.add("lity-iframe"),n&&(t=e,e=(n=n)?("string"===n&&(n=l(n)),-1<t.indexOf("?")&&(t=(r=t.split("?")).shift(),n=w({},l(r[0]),n)),t+"?"+new URLSearchParams(Object.entries(n)).toString()):t),i&&(r=e,e=-1===(t=(n=i).indexOf("#"))?r:r+(n=0<t?n.substr(t):n)),'<div class="lity-iframe-container"><iframe allow="autoplay; fullscreen" src="'+e+'"></iframe></div>'}function o(e,t){function n(){var e,t;r.reject((e="Failed loading image",(t=m.createElement("span")).classList.add("lity-error"),t.appendChild(e)))}var t=t.opener()&&t.opener().dataset.lityDesc||"Image with no description",i=m.createElement("img"),r=(i.setAttribute("src",e),i.setAttribute("alt",t),new b);return i.onload=function(){if(0===this.naturalWidth)return n();r.resolve(i)},i.onerror=n,r.promise}function k(e){var t,n=a();n&&(27===e.keyCode&&n.options("esc")&&n.close(),9===e.keyCode&&(e=e,n=(n=n).element().querySelectorAll(i),t=function(e,t){return[].slice.call(t).indexOf(e)}(m.activeElement,n),e.shiftKey&&t<=0?(n[n.length-1].focus(),e.preventDefault()):e.shiftKey||t!==n.length-1||(n[0].focus(),e.preventDefault())))}function D(){g.forEach(function(e,t){e.resize()})}function a(){return 0===g.length?null:g[0]}function s(e,t,c,u){var i,r,n,l,o,f,a,s,v,d=this,h=!1,y=!1;t=w({},C,t),i=(new DOMParser).parseFromString(t.template,"text/html").body.childNodes[0],d.element=function(){return i},d.opener=function(){return c},d.content=function(){return r},d.options=x.bind(d,t),d.handlers=x.bind(d,t.handlers),d.resize=function(){h&&!y&&(r.style.maxHeight=(m.documentElement.clientHeight||Math.round(p.innerHeight))+"px",A(r,"lity:resize",[d]))},d.close=function(){var t,e;if(h&&!y)return y=!0,(t=d).element().setAttribute(E,"true"),1===g.length&&(S.classList.remove("lity-active"),p.removeEventListener("resize",D,!1),p.removeEventListener("keydown",k,!1)),((g=g.filter(e=>t!==e)).length?g[0].element():m.querySelectorAll(".lity-hidden")).forEach(e=>{var t=e.dataset[L];e.classList.remove("lity-hidden"),t?e.setAttribute(E,t):e.removeAttribute(E),delete e.dataset[L]}),e=new b,u&&(m.activeElement===i||i!==m.activeElement&&i.contains(m.activeElement))&&u.focus(),A(r,"lity:close",[d]),i.classList.remove("lity-opened"),i.classList.add("lity-closed"),O([r].concat(i)).then(function(){A(r,"lity:remove",[d]),i.remove(),i=void 0,e.resolve()}),e.promise},n=e,l=d,o=t.handlers,e=t.handler,a="inline",s=w({},o),e&&s[e]?(f=s[e](n,l),a=e):(["inline","iframe"].forEach(function(e,t){delete s[e],s[e]=o[e]}),j(s,function(e,t){return!t||(!(!t.test||t.test(n,l))||(!1!==(f=t(n,l))?(a=e,!1):void 0))})),t={handler:a,content:f||""},i.setAttribute(E,"false"),i.classList.add("lity-loading","lity-opened","lity-"+t.handler),m.body.appendChild(i),i.focus(),i.addEventListener("click",function(e){for(var t=e.target;t&&t!=this;t=t.parentNode)if(t.matches("[data-lity-close]")){d.close();break}},!1),A(i,"lity:open",[d]),v=d,1===g.unshift(v)&&(S.classList.add("lity-active"),p.addEventListener("resize",D,!1),p.addEventListener("keydown",k,!1)),m.querySelectorAll("body > *").forEach(e=>{e!=v.element()&&(e.classList.add("lity-hidden"),void 0===e.dataset[L]&&(e&&e.getAttribute(E)&&e.setAttribute(L,e.getAttribute(E)||null),e.setAttribute(E,"true")))}),Promise.all([t.content]).then(e=>e.forEach(e=>{e&&(r="string"!=typeof e?e.length?(t=Array.prototype.reduce.call(e,function(e,t){return e+(t.outerHTML||t.nodeValue)},""),(new DOMParser).parseFromString(t,"text/html").body.childNodes[0]):e:(new DOMParser).parseFromString(e,"text/html").body.childNodes[0]),j(i.querySelectorAll(".lity-loader"),function(){var e=this;O([e]).then(function(){e.parentNode&&e.parentNode.removeChild(e)})}),i.classList.remove("lity-loading");for(var t,n=i.querySelector(".lity-content");n.firstChild;)n.removeChild(n.firstChild);n.appendChild(r),h=!0,A(r,"lity:ready",[d])}))}function n(e,t,n){e.preventDefault?(e.preventDefault(),e=(n=this).dataset.lityTarget||n.getAttribute("href")||n.getAttribute("src")):n=m.querySelector(n);t=new s(e,w({},n?n.dataset.lityOptions||n.dataset.lity:null,t),n,m.activeElement);if(!e.preventDefault)return t}return o.test=function(e){return t.test(e)},n.version="4.0.0-dev",n.options=x.bind(n,C),n.handlers=x.bind(n,C.handlers),n.current=a,n.iframe=r,m.addEventListener("click",function(e){for(var t=e.target;t&&t!=this;t=t.parentNode)if(t.matches("[data-lity]")){n.call(t,e);break}},!1),n});